#### innoDB

##### 1. MySQL存储引擎的对比

MySQL的存储引擎有InnoDB，MyISAM；InnoDB是MySQL5.5之后默认的存储引擎，它相比MyISAM具有如下特点：

1. 支持事务
2. 支持外键约束
3. 支持表锁和行级锁，而MyISAM只支持表锁

##### 2. 介绍一下数据库的事务

##### 	InnoDB是一个支持ACID事务的存储引擎。ACID分为为一致性、隔离性、持久性、原子性。

**一致性**：事务完成时，必须所有的数据都保持一致状态，例如A给B转账，A扣费的同时且B要入账；

**隔离性**：事务执行过程中，事物间的操作对对方来说是不可见的；

**持久性**：事务执行完成后，对数据库的修改是永久保存的；

**原子性**：事务是一个原子操作单元，要么全部成功，要么全部回滚到事务开始前的状态，如果事务中的任何一步失败，整个事务将回滚，以保证事务的一致性；

##### 3. InnoDB是如何实现ACID的

​	通过mvcc+锁重做日志实现隔离性，通过bin log二进制日志实现持久性，使得能在断电，宕机情况下自动恢复数据，通过undo log回滚文件实现原子性，这三特性实现才能实现数据的一致性；

##### 4. 并发事务带来了哪些问题?

- **脏读**：一个事务读取到了另一个事务未提交的数据；

- **不可重复读**：在一个事务中，多次读取同一个数据可能得到不同的结果，这是由于读取到了另一个事务对数据的<font color='red'>修改或删除</font>；
- **幻读**：指在当前事务中，另一个并发事务<font color=red>插入</font>了一些数据并提交，随后在当前事务中，查询出之前本没有的数据，好像出现了幻觉，称之为幻读；
- **丢失修改**：当两个事务对同一数据进行修改时，并且最终只有一个事务生效时，另一个事务的修改丢失，称之为丢失修改；
- **死锁**：两个事务持有对方需要的资源，互相等待，称之为死锁，需要数据库管理系统检测并释放；

##### 5. 事务的隔离级别有哪些?InnoDb默认的事务隔离级别？分别会导致哪些问题？

- **读未提交RU**：一个事务中可以读取另一个事务未提交的数据；
- **读已提交RC**：一个事务中能读取另一个已提交事务的数据；
- **可重复读RP**：一个事务只能读取当前事务的数据；（默认）
- **串行读**：事务串行化执行，绝对的数据安全，效率最低；

| 隔离级别/并发事务问题 | 脏读 | 不可重复读 | 幻读 |
| --------------------- | ---- | ---------- | ---- |
| 读未提交              | √    | √          | √    |
| 读已提交              | ×    | √          | √    |
| 可重复度              | ×    | ×          | √    |
| 串行化读              | ×    | ×          | ×    |

**InnoDB默认的事务隔离级别为可重复读，并且使用MVCC+解决了幻读的问题；**



##### 6. MySQL默认的事务隔离级别

​	可重复读

#### 索引

#### 日志

#### 锁